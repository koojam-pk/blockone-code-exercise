(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{104:function(e,t,a){e.exports=a(134)},133:function(e,t,a){},134:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(7),o=a.n(r),l=a(23),u=a(33),i=a(86),s=a(62),m=a(30),d=a(177),f=a(180),p=a(181),b=a(90),g=a(183),O=a(182),h=a(87),y=a.n(h),E=Object(d.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},avatar:{margin:10},appBar:{backgroundColor:"#eaf2f5",color:"black"}}})),j=function(){var e=E();return c.a.createElement("div",{className:e.root},c.a.createElement(f.a,{position:"static",className:e.appBar},c.a.createElement(p.a,null,c.a.createElement(O.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu"},c.a.createElement(y.a,null)),c.a.createElement(b.a,{variant:"h6",className:e.title},"Account"),c.a.createElement(g.a,{alt:"Remy Sharp",src:"/static/images/avatar/1.jpg",className:e.avatar}))))},v=a(13),w=a(140),A=a(200),N=a(139),x=a(142),S=a(188),P=a(88),C=a.n(P),k=a(196),T=a(190),F=a(199),I=a(189),W=a(186),B=a(187),D=a(185),R=a(184),L=a(20),J=a(143),U=a(48),V=a.n(U),_=a(64),q=a(56),G=a.n(q),H="set_transactions",z="set_accounts",M="set_transfer";var K=Object(d.a)((function(e){return{container:{display:"flex",flexDirection:"column"},formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)},row:{display:"flex"},rowWidth50:{flex:"1 1 49%"}}})),Q=c.a.memo((function(e){var t=K(),a=Object(l.c)(),r=Object(n.useState)({}),o=Object(v.a)(r,2),u=o[0],i=o[1],s=Object(n.useState)(""),m=Object(v.a)(s,2),d=m[0],f=m[1],p=Object(n.useState)(null),b=Object(v.a)(p,2),g=b[0],O=b[1],h=Object(n.useState)(""),y=Object(v.a)(h,2),E=y[0],j=y[1],P=Object(n.useState)(null),C=Object(v.a)(P,2),k=C[0],U=C[1],q=Object(n.useState)(null),H=Object(v.a)(q,2),Q=H[0],X=H[1],Y=Object(n.useState)(!0),Z=Object(v.a)(Y,2),$=Z[0],ee=Z[1],te=Object(n.useState)(""),ae=Object(v.a)(te,2),ne=ae[0],ce=ae[1],re=Object(n.useState)(1),oe=Object(v.a)(re,2),le=oe[0],ue=oe[1],ie=Object(n.useState)(null),se=Object(v.a)(ie,2),me=se[0],de=se[1],fe=Object(L.a)(),pe=Object(R.a)(fe.breakpoints.down("sm")),be=[];if(Object(n.useEffect)((function(){e.selectedAccount&&(i(e.selectedAccount),"{}"!==JSON.stringify(e.selectedAccount)&&f("".concat((+e.selectedAccount.amount).toLocaleString()," ").concat(e.selectedAccount.ccy.toUpperCase())))}),[e.selectedAccount]),Object(n.useEffect)((function(){if(e.accounts&&e.accounts.length>0){var t=e.accounts.filter((function(e){return e.id!==u.id}));O(t)}}),[e.accounts,u]),Object(n.useEffect)((function(){k>u.amount?X("Insufficient funds"):X(k<=0?"Amount transfer must be greater than 0":null)}),[u.amount,k]),Object(n.useEffect)((function(){var e=u.amount<=0||""===E||null!==me||null!==Q;ee(e)}),[u.amount,E,le,k,Q,me]),g&&g.length>0)for(var ge=0;ge<g.length;ge++)be.push(c.a.createElement(A.a,{key:ge,value:g[ge].id},g[ge].accountName,c.a.createElement("small",null,"\xa0(",g[ge].accountNumber,")")));return c.a.createElement("div",null,c.a.createElement(F.a,{fullScreen:pe,open:e.open,onClose:e.onClose,"aria-labelledby":"responsive-dialog-title"},c.a.createElement(D.a,{id:"responsive-dialog-title"},"Fund Transfer"),c.a.createElement(W.a,null,c.a.createElement(B.a,null),c.a.createElement("form",{className:t.container,noValidate:!0,autoComplete:"disable"},c.a.createElement("div",{className:t.row},c.a.createElement(S.a,{margin:"normal",id:"name",name:"name",label:"From",type:"text",InputProps:{readOnly:!0},style:{marginRight:8},value:u.accountName,helperText:"("+u.accountNumber+")"}),c.a.createElement(S.a,{margin:"normal",id:"availableBalance",name:"availableBalance",label:"Available Balance",type:"text",inputProps:{readOnly:!0,"data-testid":"amount",name:"amount"},value:d,helperText:"Available Balance"})),c.a.createElement("div",{className:t.row},c.a.createElement(N.a,{required:!0,className:t.textField,fullWidth:!0,style:{marginTop:16}},c.a.createElement(J.a,null,"To"),c.a.createElement(x.a,{value:E,onChange:function(e){j(e.target.value);var t=g.find((function(t){return t.id===e.target.value})).ccy;ce(t)},displayEmpty:!0,className:t.selectEmpty,autoFocus:!0,inputProps:{"data-testid":"toAccountId",name:"toAccountId"},name:"toAccountId",id:"toAccountId"},be),c.a.createElement(w.a,null,"Account To Transfer"))),c.a.createElement("div",{className:t.row},c.a.createElement(S.a,{required:!0,className:[t.textField,t.rowWidth50].join(" "),autoFocus:!0,margin:"normal",style:{marginRight:8},id:"transferAmount",name:"transferAmount",label:"Amount To Transfer",type:"number",defaultValue:"0.00",helperText:Q||(k*le).toLocaleString()+" "+ne.toUpperCase(),error:null!==Q,onChange:function(e){U(+e.target.value)},inputProps:{"data-testid":"transferAmount",name:"transferAmount"}}),c.a.createElement(S.a,{disabled:ne===u.ccy||""===ne,className:[t.textField,t.rowWidth50].join(" "),autoFocus:!0,margin:"normal",id:"rate",name:"rate",label:"Exchange Rate",type:"number",defaultValue:"1.00",helperText:me||"Exchange Rate",onChange:function(e){+e.target.value>0?(ue(+e.target.value),de(null)):de("Rate must not be less than 0")},inputProps:{"data-testid":"rate",name:"rate"},error:null!==me})))),c.a.createElement(I.a,null,c.a.createElement(T.a,{autoFocus:!0,type:"button",onClick:e.onClose,color:"primary","data-testid":"cancel",id:"cancel"},"Cancel"),c.a.createElement(T.a,{color:"primary",onClick:function(t){var n;a((n={fromId:u.id,toId:E,ccy:u.ccy,amount:k,ccyInForeign:ne,amountInForeign:k*le,rate:le},function(e){return G.a.post("http://localhost:5000/api/transfer",n).then(function(){var t=Object(_.a)(V.a.mark((function t(a){return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e({type:M,payload:a.data.transaction}),e({type:z,payload:a.data.accounts});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log("[Add Transfer Error]\n",e)}))})),e.onClose()},type:"submit",disabled:$,className:"btn-transfer",id:"submit"},"Submit"))))})),X=Object(l.b)(null,null)(Q);function Y(e,t){var a=e.toFixed(t).split(".");return a[0].split("").reduceRight((function(e,t,a,n){if("-"===t&&0===a)return t+e;var c=n.length-a-1;return t+(!c||c%3?"":",")+e}),"")+(a[1]?"."+a[1]:"")}var Z=a(135),$=a(191),ee=a(195),te=a(194),ae=a(192),ne=a(198),ce=a(193),re=[{id:"createdAt",label:"Date",minWidth:150},{id:"description",label:"Description",minWidth:200},{id:"amount",label:"Amount",minWidth:150,align:"right",format:function(e){return Y(+e,2)}},{id:"ccy",label:"Currency",minWidth:50},{id:"action",label:"Action",minWidth:70}];var oe=Object(d.a)({root:{width:"100%"},tableWrapper:{maxHeight:440,overflow:"auto"},subtitle:{margin:"1rem 0"},detail:{margin:"1rem"}}),le=c.a.memo((function(e){var t=oe(),a=Object(n.useState)(0),r=Object(v.a)(a,2),o=r[0],l=r[1],u=Object(n.useState)(10),i=Object(v.a)(u,2),s=i[0],m=i[1],d=Object(n.useState)(null),f=Object(v.a)(d,2),p=f[0],g=f[1];Object(n.useEffect)((function(){e.accountId&&e.onTransactionsFetch(e.accountId)}),[e.accountId]),Object(n.useEffect)((function(){if(e.transactions&&e.transactions.length>0){var t=e.transactions.map((function(e){return function(e){return{createdAt:e.createdAt,description:e.description,amount:e.amount,ccy:e.ccy,action:e.action}}(e)}));g(t)}}),[e.transactions]);var O=Object(n.useCallback)((function(e,t){l(t)}),[]),h=Object(n.useCallback)((function(e){m(+e.target.value),l(0)}),[]);return c.a.createElement("div",{className:t.detail},p?c.a.createElement("div",null,c.a.createElement(b.a,{variant:"h5",className:t.subtitle},"Transactions Detail"),c.a.createElement(Z.a,{className:t.root},c.a.createElement("div",{className:t.tableWrapper},c.a.createElement($.a,{stickyHeader:!0,"aria-label":"sticky table"},c.a.createElement(ae.a,null,c.a.createElement(ce.a,null,re.map((function(e){return c.a.createElement(te.a,{key:e.id,align:e.align,style:{minWidth:e.minWidth}},e.label)})))),c.a.createElement(ee.a,null,p.slice(o*s,o*s+s).map((function(e,t){return c.a.createElement(ce.a,{hover:!0,role:"checkbox",tabIndex:-1,key:t},re.map((function(t){var a=e[t.id];return c.a.createElement(te.a,{key:t.id,align:t.align,style:{textTransform:"uppercase"}},t.format&&"number"===typeof+a?t.format(a):a)})))}))))),c.a.createElement(ne.a,{rowsPerPageOptions:[10,25,100],component:"div",count:p.length,rowsPerPage:s,page:o,backIconButtonProps:{"aria-label":"previous page"},nextIconButtonProps:{"aria-label":"next page"},onChangePage:O,onChangeRowsPerPage:h}))):null)})),ue=Object(l.b)((function(e){return{transactions:e.transaction?e.transaction.transactions:null}}),(function(e){return{onTransactionsFetch:function(t){return e(function(e){return function(t){return G.a.get("http://localhost:5000/api/transactions/"+e).then(function(){var e=Object(_.a)(V.a.mark((function e(a){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t({type:H,payload:a.data.transactions}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log("[Fetch Transactions Error]\n",e)}))}}(t))}}}))(le),ie=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?n.useLayoutEffect:n.useEffect,se=Object(d.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)},fabButton:{position:"fixed",bottom:0,right:0,margin:"2rem 2rem 2rem 0"},row:{display:"flex"},rowWidth50:{flex:"1 1 49%"},accountNotSelected:{marginLeft:"0.5rem"}}})),me=Object(l.b)((function(e){return{accounts:e.account?e.account.accounts:null}}),(function(e){return{onAccountsFetch:function(){return e((function(e){return G.a.get("http://localhost:5000/api/accounts").then((function(t){return e({type:z,payload:t.data.accounts})})).catch((function(e){console.log("[Fetch Accounts Error]\n",e)}))}))}}}))((function(e){var t=se(),a=Object(n.useState)(""),r=Object(v.a)(a,2),o=r[0],l=r[1],u=Object(n.useState)(""),i=Object(v.a)(u,2),s=i[0],m=i[1],d=Object(n.useState)([]),f=Object(v.a)(d,2),p=f[0],g=f[1],O=Object(n.useState)(null),h=Object(v.a)(O,2),y=h[0],E=h[1],j=Object(n.useState)(!1),P=Object(v.a)(j,2),T=P[0],F=P[1];ie((function(){e.onAccountsFetch()}),[]),ie((function(){e.accounts&&e.accounts.length>0&&g(e.accounts)}),[e.accounts]);var I=Object(n.useMemo)((function(){return p.map((function(e,t){return c.a.createElement(A.a,{key:t,value:e.id},e.accountName,c.a.createElement("small",null,"\xa0(",e.accountNumber,")"))}))}),[p]);return c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:t.row},c.a.createElement(N.a,{className:[t.formControl,t.rowWidth50].join(" ")},c.a.createElement(x.a,{id:"accountSelect",name:"accountSelect",value:o,onChange:function(e){l(e.target.value);var t=p.find((function(t){return t.id===e.target.value}));t&&(E(t),m("".concat(Y(+t.amount,2)," ").concat(t.ccy.toUpperCase())))},displayEmpty:!0,className:t.selectEmpty,"aria-labelledby":"account",inputProps:{"data-testid":"accountSelect"}},c.a.createElement(A.a,{value:"",disabled:!0},"Account"),I),c.a.createElement(w.a,null,"Account")),c.a.createElement(S.a,{id:"balance",className:[t.textField,t.rowWidth50].join(" "),style:{marginTop:24,marginRight:8},margin:"normal",InputProps:{readOnly:!0,id:"balance"},value:s,placeholder:"Available Balance",helperText:"Available Balance"})),""===o?c.a.createElement(b.a,{variant:"body1",className:t.accountNotSelected,id:"accountNotSelected"},"Account not selected"):c.a.createElement("div",null,c.a.createElement(ue,{accountId:o}),c.a.createElement(k.a,{size:"small",color:"primary","aria-label":"add",className:t.fabButton,onClick:function(){F(!0)},disabled:""===o},c.a.createElement(C.a,null)),c.a.createElement(X,{selectedAccount:y,open:T,accounts:p,onClose:function(){F(!1)}})))})),de=function(e){var t=c.a.createElement(m.d,null,c.a.createElement(m.b,{exact:!0,path:"/",component:me}),c.a.createElement(m.a,{to:"/"}));return c.a.createElement(c.a.Fragment,null,c.a.createElement(j,null),c.a.createElement("main",null,t))},fe=a(21),pe=a(11);function be(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ge(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?be(a,!0).forEach((function(t){Object(pe.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):be(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Oe={accounts:null},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return ge({},e,{accounts:Object(fe.a)(t.payload)});default:return e}};function ye(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ee(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ye(a,!0).forEach((function(t){Object(pe.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ye(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var je={transactions:null},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:return Ee({},e,{transactions:Object(fe.a)(t.payload)});case M:var a=Object(fe.a)(e.transactions);return a.unshift(t.payload),Ee({},e,{transactions:a});default:return e}},we=Object(u.c)({account:he,transaction:ve}),Ae=(a(133),Object(u.d)(we,{},Object(u.a)(i.a)));o.a.render(c.a.createElement((function(){return c.a.createElement(l.a,{store:Ae},c.a.createElement(s.a,{basename:"/blockone-code-exercise"},c.a.createElement(de,null)))}),null),document.getElementById("root"))}},[[104,1,2]]]);
//# sourceMappingURL=main.07aeb0ac.chunk.js.map